#tag Module
Protected Module iOSControlExtension
	#tag Method, Flags = &h0
		Sub AddGestureRecognizer(extends c as ioscontrol)
		  dim mDoubleTapRecognizer as new AppleTapGestureRecognizer (c.view, FoundationFramework.NSSelectorFromString("doubleTapReceived"))
		  mDoubleTapRecognizer.NumberOfTapsRequired = 2
		  mDoubleTapRecognizer.NumberOfTouchesRequired = 1
		  c.view.AddGestureRecognizer mDoubleTapRecognizer
		  
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function Alpha(extends c as iOSControl) As Double
		  Return c.View.Alpha
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Alpha(extends c as iOSControl, assigns value as double)
		  c.View.Alpha = value
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateAlpha(extends c as ioscontrol, newAlpha as double, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.AnimateAlpha newalpha, AppleViewAnimationOption.OptionNone, Seconds, curve
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateBackgroundColor(extends c as ioscontrol, newcolor as color, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.AnimateColor newcolor.toAppleColor, AppleViewAnimationOption.OptionNone, Seconds, curve
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateBlock(extends c as ioscontrol, Block As AppleBlock, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.AnimateBlock (block, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateScale(extends c as ioscontrol, xScale as Double, YScale as Double = 0, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  if YScale = 0 then YScale = xScale
		  dim transform as CGAffineTransform = TransformExtension.CGAffineTransformScale (c.view.transform, xScale, YScale)
		  c.View.AnimateTransform (transform, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateSize(extends c as ioscontrol, width as Double, height as Double, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  dim newFrame as new rect (0,0,Width, Height)
		  c.View.AnimateBounds (newFrame.toNSRect, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub AnimateTransform(extends c as ioscontrol, aTransform as CGAffineTransform, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.AnimateTransform (aTransform, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function BackgroundColor(extends c as iOSControl) As Color
		  Return c.View.BackgroundColor.toColor
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub BackgroundColor(extends c as iOSControl, assigns value as color)
		  c.View.BackgroundColor = AppleColor.FromColor (value)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function ClipsToBounds(extends c as iOSControl) As Boolean
		  Return c.View.ClipsToBounds
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub ClipsToBounds(extends c as iOSControl, assigns value as boolean)
		  c.View.ClipsToBounds = value
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function CoreAnimationLayer(extends c as ioscontrol) As AppleCALayer
		  return c.View.Layer
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub FadeIn(extends c as ioscontrol, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.animateAlpha (1, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub FadeOut(extends c as ioscontrol, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  c.View.AnimateAlpha (0, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function FittingSize(extends c as iOSControl) As Size
		  return c.View.SizeThatFits.toCoreSize
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub InvertTransformation(extends c as ioscontrol)
		  c.View.InvertTransform
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub MoveTo(extends c as ioscontrol, x as Double, y as Double, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut)
		  dim newFrame as new rect (x, y ,c.Width, c.Height)
		  c.View.AnimateFrame (newFrame.toNSRect, AppleViewAnimationOption.OptionNone, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Redraw(extends c as iOSControl)
		  c.View.LayoutIfNeeded
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub ResetTransformation(extends c as ioscontrol)
		  c.View.ResetTransform
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Rotate(extends c as ioscontrol, Angle as double)
		  c.View.Rotate Angle.DegreeToRadian
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Scale(extends c as ioscontrol, xfactor as double, yfactor as double = 0)
		  c.View.Scale xfactor, yfactor
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SetRotation(extends c as ioscontrol, Angle as double)
		  c.View.SetRotation Angle.DegreeToRadian
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SetScale(extends c as ioscontrol, xfactor as double, yfactor as double = 0)
		  c.View.SetScale xfactor, yfactor
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SetTranslation(extends c as ioscontrol, DeltaX as double, DeltaY as double)
		  c.View.SetTranslation deltaX, deltaY
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SizeToFit(extends c as ioscontrol)
		  c.View.SizeToFit
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SpringAnimateBackgroundColor(extends c as ioscontrol, newcolor as color, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut, DampingRatio as Double = 1, Velocity As Double = 1)
		  c.View.springAnimateColor newcolor.toAppleColor, AppleViewAnimationOption.OptionNone, DampingRatio, Velocity, Seconds, curve
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SpringAnimateSize(extends c as ioscontrol, width as Double, height as Double, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut, DampingRatio as Double = 1, Velocity As Double = 1)
		  dim newFrame as new rect (0,0,Width, Height)
		  c.View.SpringAnimateBounds (newFrame.toNSRect, AppleViewAnimationOption.OptionNone, DampingRatio, Velocity, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SpringAnimateTransform(extends c as ioscontrol, aTransform as CGAffineTransform, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut, DampingRatio as Double = 1, Velocity As Double = 1)
		  c.View.SpringAnimateTransform (aTransform, AppleViewAnimationOption.OptionNone, DampingRatio, Velocity, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub SpringMoveTo(extends c as ioscontrol, x as Double, y as Double, Seconds as double = 0.2, curve as appleview.UIViewAnimationCurve = appleview.UIViewAnimationCurve.EaseInEaseOut, DampingRatio as Double = 1, Velocity As Double = 1)
		  dim newFrame as new rect (x, y ,c.Width, c.Height)
		  c.View.SpringAnimateFrame (newFrame.toNSRect, AppleViewAnimationOption.OptionNone, DampingRatio, Velocity, Seconds, curve)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function TintColor(extends c as iOSControl) As Color
		  Return c.View.TintColor.toColor
		End Function
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub TintColor(extends c as iOSControl, assigns value as color)
		  c.View.TintColor = AppleColor.FromColor (value)
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Sub Translate(extends c as ioscontrol, DeltaX as double, DeltaY as double)
		  c.View.Translate deltaX, deltaY
		End Sub
	#tag EndMethod

	#tag Method, Flags = &h0
		Function View(extends c as iOSControl) As AppleView
		  return new AppleView (c.Handle)
		End Function
	#tag EndMethod


	#tag ViewBehavior
		#tag ViewProperty
			Name="Index"
			Visible=true
			Group="ID"
			InitialValue="-2147483648"
			Type="Integer"
		#tag EndViewProperty
		#tag ViewProperty
			Name="Left"
			Visible=true
			Group="Position"
			InitialValue="0"
			Type="Integer"
		#tag EndViewProperty
		#tag ViewProperty
			Name="Name"
			Visible=true
			Group="ID"
			Type="String"
		#tag EndViewProperty
		#tag ViewProperty
			Name="Super"
			Visible=true
			Group="ID"
			Type="String"
		#tag EndViewProperty
		#tag ViewProperty
			Name="Top"
			Visible=true
			Group="Position"
			InitialValue="0"
			Type="Integer"
		#tag EndViewProperty
	#tag EndViewBehavior
End Module
#tag EndModule
